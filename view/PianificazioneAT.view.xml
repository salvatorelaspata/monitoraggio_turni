<mvc:View xmlns:mvc="sap.ui.core.mvc"
   xmlns:core="sap.ui.core"
   xmlns="sap.m"
   xmlns:l="sap.ui.layout"
   xmlns:custom="sap.ui.bki.monitoraggio.turni.custom"
   xmlns:html="http://www.w3.org/1999/xhtml"
   controllerName="sap.ui.bki.monitoraggio.turni.controller.PianificazioneAT">
   <Page showHeader="true"
      showFooter="true"
      class="sapUiContentPadding"
      showNavButton="true"
      navButtonPress="onNavBack"
      title="Pianificazione addetto ai turni">
      <subHeader>
         <Toolbar>
            <ToolbarSpacer />
            <!-- <Button text="Data Inizio: 01/09/2020 + 3 Mesi" press="onSelectDate" icon="sap-icon://appointment-2" iconFirst="false"></Button> -->
            <Title text="Data di riferimento:"></Title>
            <DatePicker id="filterDataInizio"
               width="400px"></DatePicker>
            <ToolbarSpacer />
         </Toolbar>
      </subHeader>

      <content>
         <VBox>
            <Toolbar design="Info">
               <Title text="Persone"
                  level="H2"
                  class="titleAT" />
            </Toolbar>
            <List id="personTable"
               items="{parsedModel>/Raggruppamenti}">
               <headerToolbar>
                  <Toolbar design="Transparent"
                     width="100%">
                     <ToolbarSpacer />
                     <Text text="Cerca:"
                        width="60px" />
                     <SearchField search="handleSearchPerson"></SearchField>
                  </Toolbar>
               </headerToolbar>
               <items>
                  <CustomListItem >
                     <Panel expandable="true"
                        expanded="false">
                        <headerToolbar>
                           <Toolbar height="3rem">
                              <Text text="{parsedModel>Text}" />
                           </Toolbar>
                        </headerToolbar>
                        <content>
                           <Table id="raggruppamentoTable"
                              mode="None"
                              items="{ path: 'parsedModel>Persone', templateShareable:false }">
                              <columns>
                                 <Column>
                                    <Text text="Nome" />
                                 </Column>
                                 <Column>
                                    <Text text="Cognome " />
                                 </Column>
                                 <Column>
                                    <Text text="VPL" />
                                 </Column>
                                 <Column>
                                    <Text text="Raggruppamento " />
                                 </Column>
                                 <Column>
                                    <Text text="Periodo validità raggruppamento" />
                                 </Column>
                                 <Column>
                                    <Text text="Inizio validità associazione" />
                                 </Column>
                                 <Column>
                                    <Text text="Fine validità associazione" />
                                 </Column>
                                 <Column>
                                    <Text text="Azione" />
                                 </Column>
                              </columns>
                              <items>
                                 <ColumnListItem>
                                    <customData>
                                       <core:CustomData key="CID"
                                          value="{parsedModel>CID}"
                                          writeToDom="true"/>
                                    </customData>
                                    <cells>
                                       <Text text="{parsedModel>Nome}"/>
                                       <Text text="{parsedModel>Cognome}"/>
                                       <CheckBox selected="false"/>
                                       <Select change="onChangeRaggruppamento"
                                          items="{
                                          path: 'parsedModel>Raggruppamenti',
                                          templateShareable: false
                                        }">
                                          <items>
                                             <core:Item text="{parsedModel>Nome}"
                                                key="{parsedModel>Nome}"></core:Item>
                                          </items>
                                       </Select>
                                       <Text text="{parsedModel>ValiditaRaggruppamento}"/>
                                       <Text text=""/>
                                       <Text text=""/>
                                       <Select>
                                          <items>
                                             <core:Item text=""
                                                key=""></core:Item>
                                             <core:Item text="Elimina"
                                                key="elimina"></core:Item>
                                          </items>
                                       </Select>
                                    </cells>
                                 </ColumnListItem>
                              </items>
                           </Table>
                        </content>
                     </Panel>
                  </CustomListItem>
               </items>
            </List>
         </VBox>
      </content>
      <footer>
         <Toolbar>
            <ToolbarSpacer/>
            <Button text="Salva"
               icon="sap-icon://save"
               type="Accept" />
            <Button text="Annulla"
               type="Reject" />

         </Toolbar>
      </footer>

   </Page>
</mvc:View>
